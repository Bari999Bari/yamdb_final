![yamdb workflow](https://github.com/Bari999Bari/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)

# YAMDB
YAMDB

### Описание:

Проект YaMDb собирает отзывы пользователей на произведения. Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий со временем может быть расширен.
Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.
В каждой категории есть произведения: книги, фильмы или музыка. Например, в категории «Книги» могут быть произведения «Винни-Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Насекомые» и вторая сюита Баха.
Произведению может быть присвоен жанр из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»). Новые жанры могут быть созданы по желанию пользователей, но создавать их могут только администраторы.
Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы и ставят произведению оценку в диапазоне от одного до десяти; из пользовательских оценок формируется усреднённая оценка произведения — рейтинг. На одно произведение пользователь может оставить только один отзыв

Зарегистрированные пользователи могут публиковать отзывы. Незарегистрированные пользователи могут оставлять комментарии к отзывам.


Проект доступен по адресу - http://130.193.53.64/redoc/

## Технологии:

YaMDB учебный проект базирующийся на:
- Python 3.8
- Django 2.2.28
- Docker 20.10.18
- Nginx 1.18.0
- Postgres - 13.0

## Описание:

REST API сервис для YaMDB (база данных музыки, книг, фильмов и т.д.).

Полная CRUD имплементация для моделей Title, User.

Зарегистрированные пользователи могут публиковать отзывы

Незарегистрированные пользователи могут оставлять комментарии к отзывам.


---

## Установка и запуск с помощью Docker

### Установить переменные окружения

```sh
nano infra/.env
```

#### Содержимое файла .env

```
SECRET_KEY='key'
DEBUG=False
ALLOWED_HOSTS='localhost web 127.0.0.1'
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres-pass
DB_HOST=db
DB_PORT=5432
```

### Запуск docker-compose

```sh
cd infra
docker compose up -d --build
```

### Применения миграций

```sh
docker compose exec web python manage.py migrate
```

### Загрузка данных в БД

```sh
docker compose exec web python manage.py loaddata db.json
```

### Создание суперпользователя

```sh
docker compose exec web python manage.py createsuperuser --username=admin --email=admin@local.host
```

### Сбор статики в /static/

```sh
docker compose exec web python manage.py collectstatic --no-input
```

---
